@component-name = "portal-workflow-ee"
definition {

	property portal.release = "true";
	property portal.upstream = "true";
	property test.run.environment = "EE";
	property testray.main.component.name = "Workflow Metrics";

	setUp {
		TestCase.setUpPortalInstance();

		var testPortalInstance = PropsUtil.get("test.portal.instance");

		User.firstLoginPG();

		Navigator.openURL();

		ApplicationsMenu.gotoPortlet(
			category = "Workflow",
			panel = "Applications",
			portlet = "Metrics");
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
	}

	@description = "LPS-88573 - Verify that is possible to order the table items by clicking on the table header On Time"
	@ignore = "Test Stub"
	@priority = "3"
	test CanOrderByOnTimeItems {

		// TODO LRQA-67511 CanOrderByOnTimeItems pending implementation

	}

	@description = "LPS-88573 - Verify that is possible to order the table items by clicking on the table header Overdue"
	@priority = "3"
	test CanOrderByOverdueItems {
		ApplicationsMenu.gotoPortlet(
			category = "Workflow",
			panel = "Applications",
			portlet = "Process Builder");

		Workflow.duplicateSingleApproverWorkflow(workflowName = "Single Approver 2");

		for (var workflowName : list "Single Approver,Single Approver 2") {
			WorkflowMetrics.goToWorkflowSLASettings(workflowProcessName = "${workflowName}");

			Click(locator1 = "WorkflowMetricsSLA#ADD_NEW_SLA_BUTTON");

			WorkflowMetrics.fillSLAForm(
				slaDefinitionDays = "0",
				slaDefinitionDescription = "SLA Description",
				slaDefinitionEnd = "Process Ends: Approved",
				slaDefinitionHours = "00:01",
				slaDefinitionName = "Test",
				slaDefinitionStart = "Process Begins");

			Button.clickSave();
		}

		for (var workflowName : list "Single Approver,Single Approver 2") {
			ApplicationsMenu.gotoPortlet(
				category = "Workflow",
				panel = "Applications",
				portlet = "Process Builder");

			Navigator.gotoNavItem(navItem = "Configuration");

			Workflow.configureWorkflow(
				workflowDefinition = "${workflowName}",
				workflowResourceValue = "Blogs Entry");

			Navigator.openURL();

			ProductMenu.gotoPortlet(
				category = "Content &amp; Data",
				panel = "Site Administration",
				portlet = "Blogs");

			Blogs.addWithWorkflow(
				entryContent = "Blogs Entry Content",
				entrySubtitle = "Subtitle",
				entryTitle = "Blogs Entry Title");
		}

		Blogs.addWithWorkflow(
			entryContent = "Blogs Entry Content",
			entrySubtitle = "Subtitle",
			entryTitle = "Blogs Entry Title");

		Pause(locator1 = "100000");

		ApplicationsMenu.gotoPortlet(
			category = "Workflow",
			panel = "Applications",
			portlet = "Metrics");

		Click(
			key_assigneeName = "Overdue",
			locator1 = "WorkflowMetrics#METRICS_WORKLOAD_BY_ASSIGNEE_NAME_TABLE");

		AssertTextEquals(
			key_rowNumber = "3",
			locator1 = "WorkflowAllItems#METRICS_OVERDUE_ITEMS_TABLE_ROW",
			value1 = "2");

		AssertTextEquals(
			key_rowNumber = "2",
			locator1 = "WorkflowAllItems#METRICS_OVERDUE_ITEMS_TABLE_ROW",
			value1 = "1");

		Click(
			key_assigneeName = "Overdue",
			locator1 = "WorkflowMetrics#METRICS_WORKLOAD_BY_ASSIGNEE_NAME_TABLE");

		AssertTextEquals(
			key_rowNumber = "1",
			locator1 = "WorkflowAllItems#METRICS_OVERDUE_ITEMS_TABLE_ROW",
			value1 = "2");

		AssertTextEquals(
			key_rowNumber = "2",
			locator1 = "WorkflowAllItems#METRICS_OVERDUE_ITEMS_TABLE_ROW",
			value1 = "1");
	}

	@description = "LPS-88573 - Verify that is possible to order the table items by clicking on the table header Process Name"
	@ignore = "Test Stub"
	@priority = "3"
	test CanOrderByProcessName {

		// TODO LRQA-67509 CanOrderByProcessName pending implementation

	}

	@description = "LPS-88573 - Verify that is possible to order the table items by clicking on the table header Total Pending"
	@ignore = "Test Stub"
	@priority = "3"
	test CanOrderByTotalPendingItems {

		// TODO LRQA-67512 CanOrderByTotalPendingItems pending implementation

	}

	@description = "LPS-88573 - Verify that the search can be done by similar words, not having 100% match needs of the string"
	@priority = "4"
	test CanSearchBySimilarWords {
		WorkflowMetricsProcessListView.metricsWorkflowSearch(workflowSearchName = "Single Ap");

		WorkflowMetrics.assertWorkflowProcessPresent(workflowProcessName = "Single Approver");
	}

	@description = "LPS-88573 - Verify that the Clear All option cleans the search results"
	@ignore = "Test Stub"
	@priority = "3"
	test ClearAllSearchResults {

		// TODO LRQA-67508 ClearAllSearchResults pending implementation

	}

	@description = "LPS-88573 - Verify that the specific empty state is displayed when there are no metrics available"
	@ignore = "Test Stub"
	@priority = "2"
	test DisplayEmptyStateWhenNoProcessAvailable {

		// TODO LRQA-67516 DisplayEmptyStateWhenNoProcessAvailable pending implementation

	}

	@description = "LPS-88573 - Verify that the table displays the specific empty state when there are no results for search terms"
	@ignore = "Test Stub"
	@priority = "2"
	test DisplayEmptyStateWhenNoResult {

		// TODO LRQA-67506 DisplayEmptyStateWhenNoResult pending implementation

	}

	@description = "LPS-86638 - Verify that the pagination button indicates the selected page, even when there is only 1 page"
	@priority = "3"
	test PaginationButtonIndicatesSelectedPage {
		ApplicationsMenu.gotoPortlet(
			category = "Workflow",
			panel = "Applications",
			portlet = "Process Builder");

		Workflow.addNewDefinition(workflowDefinitionTitle = "New Workflow 1");

		PortletEntry.publish();

		Navigator.gotoBack();

		Workflow.addNewDefinition(workflowDefinitionTitle = "New Workflow 2");

		PortletEntry.publish();

		Navigator.gotoBack();

		Workflow.addNewDefinition(workflowDefinitionTitle = "New Workflow 3");

		PortletEntry.publish();

		Navigator.gotoBack();

		ApplicationsMenu.gotoPortlet(
			category = "Workflow",
			panel = "Applications",
			portlet = "Metrics");

		WorkflowMetricsProcessListView.assertPaginationComponentPresent(pageNumberList = "1");
	}

	@description = "LPS-86638 - Verify that pagination follows in asc/desc sequence"
	@ignore = "Test Stub"
	@priority = "3"
	test PaginationFollowsAscDescSequence {

		// TODO LRQA-67519 PaginationFollowsAscDescSequence pending implementation

	}

	@description = "LPS-86638 - Verify that the pagination component is displayed when the table has 5 items or more"
	@priority = "3"
	test PaginationIsDisplayedWhenTableHas5Items {
		ApplicationsMenu.gotoPortlet(
			category = "Workflow",
			panel = "Applications",
			portlet = "Process Builder");

		Workflow.addNewDefinition(workflowDefinitionTitle = "New Workflow 1");
		PortletEntry.publish();

		Navigator.gotoBack();

		Workflow.addNewDefinition(workflowDefinitionTitle = "New Workflow 2");

		PortletEntry.publish();

		Navigator.gotoBack();

		Workflow.addNewDefinition(workflowDefinitionTitle = "New Workflow 3");

		PortletEntry.publish();

		Navigator.gotoBack();

		Workflow.addNewDefinition(workflowDefinitionTitle = "New Workflow 4");

		PortletEntry.publish();

		Navigator.gotoBack();

		Workflow.addNewDefinition(workflowDefinitionTitle = "New Workflow 5");

		PortletEntry.publish();

		Navigator.gotoBack();

		ApplicationsMenu.gotoPortlet(
			category = "Workflow",
			panel = "Applications",
			portlet = "Metrics");

		WorkflowMetricsProcessListView.assertPaginationBar();
	}

	@description = "LPS-88573 - Verify that the Results Bar show the searched terms"
	@ignore = "Test Stub"
	@priority = "4"
	test ResultBarShowsSearchedItems {

		// TODO LRQA-67507 ResultBarShowsSearchedItems pending implementation

	}

	@description = "LPS-88573 - Verify that once an order option is made by the user, this definition should be saved by the system during the user stay in the Metrics context, even when the user makes a search query, reloads the page"
	@ignore = "Test Stub"
	@priority = "3"
	test SavedOrderOptionStaysInMetricsContext {

		// TODO LRQA-67513 SavedOrderOptionStaysInMetricsContext pending implementation

	}

	@description = "LPS-88573 - Verify that when an instance from Asset is added to the list of process, the count number should be reflected on the Process List"
	@ignore = "Test Stub"
	@priority = "5"
	test TableDisplaysCorrectNumbersWhenAssetAdded {

		// TODO LRQA-67514 TableDisplaysCorrectNumbersWhenAssetAdded pending implementation

	}

	@description = "LPS-88573 - Verify that the table entries are ordered by Overdue, from biggest to the smaller value, by default"
	@ignore = "Test Stub"
	@priority = "3"
	test TableIsOrderedByOverdueDesc {

		// TODO LRQA-67515 TableIsOrderedByOverdueDesc pending implementation

	}

}